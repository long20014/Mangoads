(self.AMP=self.AMP||[]).push({n:"amp-sidebar",v:"1499361527811",f:(function(AMP){function g(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(b,d);f&&Object.defineProperty(a,d,f)}else a[d]=b[d]};Date.now();self.log=self.log||{user:null,dev:null};var h,k;function l(a){var b=a.indexOf("#");return-1==b?a:a.substring(0,b)};function m(a,b){a=a.__AMP_TOP||a;return n(a,b)}function p(a){a=r(a);a=r(a);a=a.isSingleDoc()?a.win:a;return n(a,"history")}function r(a){return a.nodeType?m((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function n(a,b){var c=a.services;c||(c=a.services={});var d=c;a=d[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj};function t(a,b){for(var c,d=a;d&&d!==c;d=d.parentElement)if(b(d))return d;return null}function u(a){var b="A";if(a.closest)return a.closest(b);b=b.toUpperCase();return t(a,function(a){return a.tagName==b})};var v,w="Webkit webkit Moz moz ms O o".split(" ");function x(a,b){var c=void 0;if(2>b.length?0:0==b.lastIndexOf("--",0))return b;v||(v=Object.create(null));var d=v[b];if(!d||c){d=b;if(void 0===a[b]){var f=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var q=0;q<w.length;q++){var y=w[q]+f;if(void 0!==a[y]){f=y;break a}}f=""}var e=f;void 0!==a[e]&&(d=e)}c||(v[b]=d)}return d}function z(a,b,c){var d;(b=x(a.style,b))&&(a.style[b]=d?c+d:c)}
function A(a,b){if(void 0===b){var c;c=(c=x(a.style,"display"))?a.style[c]:void 0;b="none"==c}z(a,"display",b?"":"none")};function B(a){AMP.BaseElement.call(this,a);this.m=null;this.o=m(this.win,"vsync");this.g=null;this.c=this.win.document;this.u=this.c.documentElement;this.h=null;var b=m(this.win,"platform");this.w=b.isIos();this.A=b.isSafari();this.i=-1;this.s=!1;this.l=m(this.win,"timer");this.b=null}g(B,AMP.BaseElement);B.prototype.isLayoutSupported=function(a){return"nodisplay"==a};
B.prototype.buildCallback=function(){var a=this;this.h=this.element.getAttribute("side");this.m=this.getViewport();this.m.addToFixedLayer(this.element,!0);if("left"!=this.h&&"right"!=this.h){var b=this.c.body.getAttribute("dir")||this.u.getAttribute("dir")||"ltr";this.h="rtl"==b?"right":"left";this.element.setAttribute("side",this.h)}this.w&&C(this);D(this)?this.j():this.element.setAttribute("aria-hidden","true");this.element.hasAttribute("role")||this.element.setAttribute("role","menu");this.element.tabIndex=
-1;this.u.addEventListener("keydown",function(b){27==b.keyCode&&a.a()});var c=this.element.getAttribute("data-close-button-aria-label")||"Close the sidebar",d=this.c.createElement("button");d.textContent=c;d.classList.add("i-amphtml-screen-reader");d.tabIndex=-1;d.addEventListener("click",function(){a.a()});this.element.appendChild(d);this.registerAction("toggle",this.B.bind(this));this.registerAction("open",this.j.bind(this));this.registerAction("close",this.a.bind(this));this.element.addEventListener("click",
function(b){if((b=u(b.target))&&b.href){var d;d=b.href;h||(h=self.document.createElement("a"),k=self.UrlCache||(self.UrlCache=Object.create(null)));var c=k[d];if(c)d=c;else{c=h;c.href=d;c.protocol||(c.href=c.href);var e={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname);if("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)e.port="",
e.host=e.hostname;e.origin=c.origin&&"null"!=c.origin?c.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href;d=k[d]=e}var f=d,E=a.getAmpDoc().win.location.href;l(b.href)==l(E)&&f.hash&&a.a()}},!0)};function D(a){return a.element.hasAttribute("open")}B.prototype.activate=function(){this.j()};B.prototype.B=function(){D(this)?this.a():this.j()};
B.prototype.j=function(){var a=this;D(this)||(this.m.enterOverlayMode(),this.o.mutate(function(){A(a.element,!0);F(a);a.w&&a.A&&G(a);a.element.scrollTop=1;a.o.mutate(function(){a.element.setAttribute("open","");a.element.setAttribute("aria-hidden","false");a.b&&a.l.cancel(a.b);a.b=a.l.delay(function(){var b=a.getRealChildren();a.scheduleLayout(b);a.scheduleResume(b);try{a.element.focus()}catch(c){}},550)})}),p(this.getAmpDoc()).push(this.a.bind(this)).then(function(b){a.i=b}))};
B.prototype.a=function(){var a=this;D(this)&&(this.m.leaveOverlayMode(),this.o.mutate(function(){a.g&&A(a.g,!1);a.element.removeAttribute("open");a.element.setAttribute("aria-hidden","true");a.b&&a.l.cancel(a.b);a.b=a.l.delay(function(){D(a)||a.o.mutate(function(){A(a.element,!1);a.schedulePause(a.getRealChildren())})},550)}),-1!=this.i&&(p(this.getAmpDoc()).pop(this.i),this.i=-1))};
function F(a){if(!a.g){var b=a.c.createElement("div");b.classList.add("i-amphtml-sidebar-mask");b.addEventListener("click",function(){a.a()});a.element.ownerDocument.body.appendChild(b);b.addEventListener("touchmove",function(a){a.preventDefault()});a.g=b}A(a.g,!0)}
function C(a){a.element.addEventListener("scroll",function(b){D(a)&&(1>a.element.scrollTop?(a.element.scrollTop=1,b.preventDefault()):a.element.scrollHeight==a.element.scrollTop+a.element.offsetHeight&&(--a.element.scrollTop,b.preventDefault()))})}function G(a){if(!a.s){var b=a.c.createElement("div"),c={height:"10vh",width:"100%","background-color":"transparent"},d;for(d in c)z(b,d,c[d]);a.element.appendChild(b);a.s=!0}}(function(a){a.registerElement("amp-sidebar",B,"amp-sidebar{position:fixed!important;top:0;max-height:100vh!important;height:100vh;max-width:80vw!important;background-color:#efefef;min-width:45px!important;outline:none;overflow-x:hidden!important;overflow-y:auto!important;z-index:2147483647;-webkit-overflow-scrolling:touch;will-change:transform}amp-sidebar[side=left]{left:0!important;-webkit-transform:translateX(-100%)!important;transform:translateX(-100%)!important}amp-sidebar[side=right]{right:0!important;-webkit-transform:translateX(100%)!important;transform:translateX(100%)!important}amp-sidebar[side][open]{-webkit-transform:translateX(0)!important;transform:translateX(0)!important}amp-sidebar[side]{-webkit-transition:-webkit-transform 233ms cubic-bezier(0,0,.21,1);transition:-webkit-transform 233ms cubic-bezier(0,0,.21,1);transition:transform 233ms cubic-bezier(0,0,.21,1);transition:transform 233ms cubic-bezier(0,0,.21,1),-webkit-transform 233ms cubic-bezier(0,0,.21,1)}.i-amphtml-sidebar-mask{position:fixed!important;top:0!important;left:0!important;width:100vw!important;height:100vh!important;opacity:0.2;background-image:none!important;background-color:#000;z-index:2147483646}\n/*# sourceURL=/extensions/amp-sidebar/0.1/amp-sidebar.css*/")})(self.AMP);
})});
//# sourceMappingURL=amp-sidebar-0.1.js.map
